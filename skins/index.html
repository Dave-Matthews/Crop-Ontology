<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>

<title>Crop Ontology - Curation tool demo</title>
<link href="/stylesheets/bundle_common.css?677c14c4c0026f1b894c1fe68b5a6549bff32c5a" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/bundle_github.css?677c14c4c0026f1b894c1fe68b5a6549bff32c5a" media="screen" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="/jquery.treeview.css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
<!--<script type="text/javascript" src="http://vadikom.com/demos/poshytip/src/jquery.poshytip.js"></script> 
<link href="http://vadikom.com/demos/poshytip/src/tip-twitter/tip-twitter.css" media="screen" rel="stylesheet" type="text/css" />-->
<script> 
(function(){
 
var URL = "http://test.development.grinfo.net/Luca/datadict";
var roots_loaded = false;
 
function tooltip() {
    // tool tip
    //
    $('.minibutton').poshytip({
        className: 'tip-twitter',
        showTimeout: 1,
        alignTo: 'target',
        alignX: 'center',
        offsetY: 5,
        allowTipHover: false,
        fade: false,
        slide: false
    });
}
 
/*
 * takes care of assigning proper
 * click events for expanding this li
 */
function expand_collapse(li) {
    var div = li.find(".hitarea");
 
    div.click(function() {
 
        var parent = li.find("ul").first();
 
 
        // check whether we need to expand or collapse
        if(li.hasClass("collapsable")) { // collapsing
            li.removeClass("collapsable");
            li.addClass("expandable");
            var hitarea = li.find(".hitarea").first();
            hitarea.removeClass("collapsable-hitarea");
            hitarea.addClass("expandable-hitarea");
            if(li.hasClass("lastCollapsable")) {
                li.removeClass("lastCollapsable");
                li.addClass("lastExpandable");
                hitarea.removeClass("lastCollapsable-hitarea");
                hitarea.addClass("lastExpandable-hitarea");
            }
 
            // let's clear the ul contents
            parent.hide();
 
 
        } else if(li.hasClass("expandable")) { // expanding
            li.removeClass("expandable");
            li.addClass("collapsable");
            var hitarea = li.find(".hitarea").first();
            hitarea.removeClass("expandable-hitarea");
            hitarea.addClass("collapsable-hitarea");
            if(li.hasClass("lastExpandable")) {
                li.removeClass("lastExpandable");
                li.addClass("lastCollapsable");
                hitarea.removeClass("lastExpandable-hitarea");
                hitarea.addClass("lastCollapsable-hitarea");
            }
 
            // if parent contains a filled UL, dont run the ajax call again, just show it
            if(parent.children().length) {
                parent.show();
            } else {
 
                var id = li.find(".id").val();

                load_branch(parent, "http://cropontology.org/ontology-lookup/tree.view?q=treebuilder&ontologyname="+id.split(":")[0]+"&id="+id);
                // TODO - fix this - for now we just have a global variable tracking if we
                // need to load the root ontology (only the first time) and nodes for the rest
                /*
                if(roots_loaded) {

                    load_branch(parent, URL+"/OntologyDataWrapperProxy.php?out-format=json&command=GetNodeChildren&NodeID="+id);
                } else {
                    load_branch(parent, URL+"/OntologyDataWrapperProxy.php?out-format=json&command=ListOntologyRoots&NodeOntology="+id);
                    // roots loaded
                    roots_loaded = true;
                }
                */
            }
 
        }
 
    });
 
}
 
// load comments on the right side
var comments = (function(){
    var template;
 
    function make_comment(data) {
        var clone = template.clone()
 
        var link = clone.find("strong.author a");
        link.attr("href", "#");
        link.text(data.user);
 
        clone.find(".date .relatize").text(data.date);
 
        clone.find(".body .content-body p").text(data.comment);
 
        return clone;
    }
    function load(data) {
        if(!template)
            template = $(".comment").first().clone();
        
        // clear comment list
        $(".comment-list").html("");
 
        for(var i=0; i<data.length; i++) {
            $(".comment-list").append(make_comment(data[i]));
        }
 
    }
 
    return {
        load: load
    };
})();
 
// global, blah
term_loader = function(show) {
    var context = $(".context-loader");
    if(show) {
        //fade.fadeTo("fast", 0.5);
        $(".error").hide();
        context.show();
 
 
    } else {
        context.hide();
        //fade.fadeTo("fast", 1);
    }
 
}
 
// attributes is an array of key:value pairs
function show_attributes(id, name, attributes) {
    var str = '<table cellspacing="0" cellpadding="0" class="attributes">';


    $.each(attributes, function(i) {
        var attr = this,
            class_name = "";
        if(i == attributes.length-1) // last
            class_name = "last";

        var storedLocallyClass = "";
        if(attr.local)
            storedLocallyClass = "storedLocally";

        var iseven = false;
        if(i%2 === 0) // is even
            iseven = true;
            
        str += "<tr class='"+class_name+ " " +(iseven ? "even" : "")+" "+storedLocallyClass+"'><td class='key'>"+attr.key + "</td><td class='value'>"+ attr.value+"</td></tr>";
 
    });
    if(!attributes.length)
        str += "<tr class='last'><td class='error' colspan=2>No additional information available.</td><td></td></tr>";

    str += "</table>";

    str += '<span class="add_attribute">Add a new attribute</span>';

    $(".right ul.filters li a").text(name);
    $("#term_id").text(id);
    $("#pages .general").html(str);
 
}
 
// click event function
// must load data for this specifict
load_term = function(li) {
    // get info for this specific term name located under /datadict/TermName/json
    term_loader(true);

 
    var id = li.find(".id").val();
    var name = li.find("a.minibutton span").text();
 
    var parent = li.parent();
 
    var ontology_name = id.split(":")[0];
    var url = "http://cropontology.org/ontology-lookup/definition.view?&termid="+id+"&ontologyname="+ontology_name+"&q=termmetadata&_=";
 
    /* get node info (attributes) */
    $.get("/httpget", {url:url}, function(xml){
        var jxml = $(xml);
        var attributes = [];
        jxml.find("item").each(function(){
            attributes.push({
                key: $(this).find("name").text(),
                value: $(this).find("value").text()
            });
        });
        // let's also load the attributes stored locally for this term
        $.getJSON("/get-attribute", {term_id: id}, function(this_attrs) {
            $.each(this_attrs, function(i) {
                this_attrs[i].local = true;
                attributes.push(this_attrs[i]);
            });

            // let's show the attributes
            show_attributes(id, name, attributes);
            term_loader(false);
        });
        //$(".browser-content .filters li a").text(data.code).attr("href", "http://test.development.grinfo.net/Luca/datadict/"+data.code);
        
        // load comments
        //comments.load(data.comments);

 
    }, "xml");
 
    /* get comments */
    /*
    var comm_url = URL+"/OntologyDataWrapperProxy.php?out-format=json&command=ListTopics&CommentNode="+id;
    $.getJSON(comm_url, function(data){
        console.log(data);
        //comments.load(data.comments);
 
    });
    */
}
 
/*
 *
 * @returns a jquery dom element
 */
function make_li(obj, last) {
 
    // generic attributes
    var id = obj.id;
    var name = obj.name;
    var label = obj.label;
    var summary = obj.summary;
    var has_children = obj.has_children,
        hitarea;

    var li = $("<li></li>");
    if(last)
        li.addClass("last");
 
 
    // add a hidden input to track the id of this node
    li.append('<input type="hidden" class="id" value="'+id+'" />');
 
    if(has_children){
        li.addClass("expandable");
        hitarea = $('<div class="hitarea expandable-hitarea"></div>'); 
        li.append(hitarea);
    }
    if(last && has_children) {
        li.addClass("lastExpandable");
        hitarea.addClass("lastExpandable-hitarea");
    }
 
    var link = $('<a title="'+summary+'" class="minibutton btn-watch"><span>'+name+'</span></a>');
 
    link.click(function(e) {
        load_term(li);
        e.preventDefault();
        e.stopPropagation();
    });
 
    li.append(link);
 
    if(label)
        li.append('<div class="meta">'+label+'</div>');
 
    // last child
    if(has_children){
        li.append('<ul style="display:none;"></ul>');
 
        // assign click events for expansion/collapse
        expand_collapse(li);
    }
 
    return li;
}
 
function loader(parent, show) {
    var jimg = $("<img>").attr("src", "/images/metabox_loader.gif");
 
    if(show) {
        jimg.insertBefore(parent);
    } else { // hide
        $(parent).prev().remove();
    }
 
}
function get_id_desc(ontologyName, func) {
    // first get id
    $.get("/httpget", {url: "http://cropontology.org/ontology-lookup/tree.view?q=treebuilder&ontologyname="+ontologyName}, function(xml) {
        var id = $(xml).find("node").attr("accession");
        var has_children = $(xml).find("node").attr("has_children");
        // then get  of root
        $.get("/httpget", {url: "http://cropontology.org/ontology-lookup/ontologydef.view?&targetid=ontologyDefinition&ontologyname="+ontologyName+"&q=ontologydef&_="}, function(cxml) {
            var description = $(cxml).find("value").text();

            // call the callback
            func(id, description, has_children);
            
        }, "xml");

    }, "xml");
}
 
/*
 * loads a single branch given an array of objects
 * @parent - the container of the branch, a jquery DOM element; 
 *           this gets populated with the elements
 * @url - the json array of objects to do an AJAX request to
 */
function load_branch(parent, url) {
    var obj, li;
 
    // insert before the parent a loading image
    loader(parent, true);
 
    parent.show();
 
    $.get("/httpget", {url: url}, function(xml) {
        // hide the loading image
        var jxml = $(xml);

        var items = jxml.find("item");
        if(items.length) { // it's a root branch we're loading
            var count = 0;

            items.each(function(i) {
                /*devcount++; if(devcount > 5) return; // to make dev faster*/


                var onto_name = $(this).find("name").text();
                var onto_id = $(this).find("value").text();
                // get ontology id and description
                get_id_desc(onto_id, function(id, description, has_children){
                    obj = {
                        id: id,
                        name: onto_name,
                        has_children: (has_children == "1" ? true : false)
                    };
                    if(i == items.length-1) // last
                        li = make_li(obj, true);
                    else
                        li = make_li(obj);
                    
                    parent.append(li);

                    count++;
                    if(count == items.length)
                        loader(parent, false);
                });
            });
        } else { // it's a inner branch we're loading
            var nodes = jxml.find("node");
            nodes.each(function(i) {
                var $this = $(this);
                obj = {
                    id: $this.attr("accession"),
                    name: $this.attr("name"),
                    has_children: ($this.attr("has_children") == "1" ? true : false)
                };
                if(i == nodes.length-1) // last
                    li = make_li(obj, true);
                else
                    li = make_li(obj);
                
                parent.append(li);
            });
            loader(parent, false);
        }
        
        // assign tooltip hovering
        //tooltip();
 
    }, "xml");
}
 
function mylogin() {
    var jmylogin = $("#mylogin");
    var jmain = $("#main");
 
    if(jmylogin.is(":visible")) {
        jmylogin.hide();
        jmain.css("opacity", "1");
 
 
    } else { // show it
        jmylogin.show();
        jmain.css("opacity", "0.2");
 
 
    }
 
}


var row_edit_template = '\
        <tr class="inline-edit">\
            <td class="key">\
                <p>\
                    <input type="text" class="textfield" name="value" value="">\
                </p>\
            </td>\
            <td class="value">\
                <form enctype="multipart/form-data" method="post" action="/add-attribute" id="form_add_attribute" target="upload_iframe">\
                    <input type="hidden" name="term_id" />\
                    <input type="hidden" name="key" />\
                    <p><textarea class="textfield" name="value"></textarea></p>\
                    <p>\
                        <select class="textimage-switch">\
                            <option>Text</option>\
                            <option>Image</option>\
                        </select>\
                    </p>\
                    <div class="form-actions">\
                        <button type="submit" class="minibutton"><span>Save</span></button> &nbsp; <a href="#" class="cancel">Cancel</a>\
                    </div>\
                </form>\
            </td>\
        </tr>\
        ';


function add_attribute(){
    var jattributes = $(".attributes");
    var last = jattributes.find(".last");
    last.removeClass("last");

    // check if 'last' is even or not by checking the class
    var islasteven = true;
    if(last.attr("class").indexOf("even") == -1) // even not found
        islasteven = false;

    var new_attr = $(row_edit_template);
    new_attr.addClass("last");
    if(!islasteven)
        new_attr.addClass("even");

    $(".attributes").append(new_attr);
}
 
/*
 * Events assignment
 * clicks, mouseovers etc etc..
 */
var events = function(){
    // right navigation
    $("ul.sorts li").click(function(){
        var $this = $(this);
 
        // deselect all navigation buttons
        $("ul.sorts li").removeClass("desc");
 
        // select this nav button
        $this.addClass("desc");
 
        // get the id of this node
        var id = $this.attr("id");
 
        // hide all pages
        $("#pages").children().hide();
 
        // load page pased on this id
        $("."+id).show();
 
    });
 
    
 
    // mousedown event
    $(".minibutton, .classy").live("mousedown", function() {
        $(this).addClass("mousedown");
    });
    $(".minibutton, .classy").live("mouseup", function() {
        $(this).removeClass("mousedown");
    });
    $(".minibutton, .classy").live("mouseout", function() {
        $(this).removeClass("mousedown");
    });
 
    // comment post
    $(".new-comments .form-actions button").click(function(e) {
        var comment = $(".new-comments .comment-form textarea").val();
        var term_id = $(".browser-content .filters li a").text();
 
        term_loader(true);
 
        $.ajax({
          type: 'POST',
          url: 'http://test.development.grinfo.net/Luca/datadict/google-login',
          data: {
            "term_id" : term_id,
            "text" :comment
          },
          success: function(data) {
            term_loader(false);
            // load comments of this term again
            // simulate click on this, rather ugly
            //load_term(term_id);
            // clear textarea
            $(".new-comments .comment-form textarea").val("");
          }
        });
 
        e.preventDefault();
        e.stopPropagation();
    });
    $("#login-close").click(function(e){
 
        mylogin();
 
        e.preventDefault();
        e.stopPropagation();
    });
 
    $("#login_form").submit(function(e){
        $(".context-loader").show();
        $.ajax({
          type: 'POST',
          url: 'http://test.development.grinfo.net/Luca/datadict/google-login',
          data: {
            "username":$("#login_form input[name=username]").val(),
            "password":$("#login_form input[name=password]").val()
          },
          success: function(data){
            $(".error").hide();
            $(".error_box").hide();
            term_loader(false);
 
 
          }
        });
 
        e.preventDefault();
        e.stopPropagation();
    });


    // adding new attribute
    $(".add_attribute").live("click",function(e) {
        add_attribute();
    });

    //
    $(".textimage-switch").live("change",function(e) {
        var text = '<textarea class="textfield" name="value"></textarea>';
        var img = '<input name="value" type="file" />';
        var $this = $(this);
        var cont = $this.parent().prev();
        if($this.val() == "Image") {
            cont.html(img);
        } else { 
            cont.html(text);
        }
    });

    $(".attributes tr.inline-edit a.cancel").live("click", function(e) {
        var $this = $(this);
        var table = $this.parents("table.attributes");
        $this.parents(".inline-edit").remove();
        table.find("tr").last().addClass("last");

        if(jcurrHoveredTr)jcurrHoveredTr.show();
        e.preventDefault();
        e.stopPropagation();
    });

    // submitting a new attribute
    /*
    $(".attributes tr.inline-edit button.minibutton").live("click", function(e) {
        var parent_tr = $(this).parents("tr.inline-edit");
        var key = parent_tr.find("td.key input").val();
        var value = parent_tr.find("td.value textarea").val();
        var term_id = $("#term_id").text();

        term_loader(true);
        $.post("/add-attribute", {term_id:term_id,key:key, value:value}, function(data) {
            term_loader(false);
            // great term was saved, let's reload this term
            // to reload the term re-using load_term(li) we need to find the li object
            var li = $("input.id[value=\""+term_id+"\"]").parent();
            load_term(li);

        });

        e.preventDefault();
        e.stopPropagation();
    });
    */
    $("#form_add_attribute").live("submit",function(e) {
        // add the key and term_id to the form
        var parent_tr = $(this).parents("tr.inline-edit"),
            key = parent_tr.find("td.key input").val(),
            term_id = $("#term_id").text();
        $(this).find("input[name=key]").val(key);
        $(this).find("input[name=term_id]").val(term_id);
        // start upload by target
        term_loader(true);
        
    });

    
    var toolbar = $(".toolbar");
    var jcurrHoveredTr;
    $(".storedLocally").live("mouseover", function(){
        function showToolbar(row) {
            var p = row.offset();
            toolbar.show();
            toolbar.css("top", p.top+"px");
            toolbar.css("left", p.left + row.width()+"px");
        }
        jcurrHoveredTr = $(this);

        showToolbar($(this));
    });
    $(".storedLocally").live("mouseout", function(){
        toolbar.hide();

    });

    toolbar.live("mouseover", function(){
        $(this).show();
    });
    toolbar.live("mouseout", function(){
        $(this).hide();
    });

    $(".toolbar_edit").live("click", function() {
        var edit_row = $(row_edit_template);
        edit_row.addClass("even");
        // make sure the template has all the right inputs filled up of jcurrHoveredTr
        var key = jcurrHoveredTr.find("td.key").text();
        var value = jcurrHoveredTr.find("td.value").text()
        edit_row.find("td.key input").val(key);
        edit_row.find("td.value textarea").val(value);

        edit_row.insertAfter(jcurrHoveredTr);
        jcurrHoveredTr.hide();

    });
    $(".toolbar_remove").live("click", function() {
        var key = jcurrHoveredTr.find("td.key").text();
        var term_id = $("#term_id").text();
        term_loader(true);
        var answer = confirm("Are you sure you want to delete this attribute?");
        if(answer) {
            $.post("/remove-attribute",{key:key, term_id: term_id}, function(){

                term_loader(false);
                // great term was saved, let's reload this term
                // to reload the term re-using load_term(li) we need to find the li object
                var li = $("input.id[value=\""+term_id+"\"]").parent();
                load_term(li);

            });
        } else{ term_loader(false); }

    });
 
};
 
$(document).ready(function(){
 
    /* load initial root branch - left-side */
    load_branch($("#root"), "http://cropontology.org/ontology-lookup/direct.view?q=ontologyfilter");
 
    /* assign some events for ui */
    events();
 
    /* global ajax setup thing */
    $.ajaxSetup({
        "success": function() {   
            $(".error").hide();
            $(".error_box").hide();
            term_loader(false);
        },
        "error": function() {   
            term_loader(false);
            $(".error").show();
            $(".error_box").show();
        }
    });
 
});
 
})();
 

function fileupload_done() {
    var term_id = $("#term_id").text();
    term_loader(false);
    // great term was saved, let's reload this term
    // to reload the term re-using load_term(li) we need to find the li object
    var li = $("input.id[value=\""+term_id+"\"]").parent();
    load_term(li);
}
</script> 
 
 
<style> 
.right {
    width: 500px;
}
.cont {
padding: 20px; background-color: white;
width: 360px;
height: 400px;
overflow-x: auto;
overflow-y: auto;
 
}
.meta {
    font-weight: bold;
    margin-left: 11px;
    font-size: 10px;
    color: rgba(0, 0, 0, 0.55);
text-shadow:none !important;
}
li.collapsable > a.minibutton{
    color:#fff;
    text-decoration:none;
    text-shadow:-1px -1px 0 rgba(0,0,0,0.3);
    border-color:#518cc6;
    border-bottom-color:#2a65a0;
    background:#599bdc;
    filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#599bdc',endColorstr='#3072b3');
    background:-webkit-gradient(linear,left top,left bottom,from(#599bdc),to(#3072b3));
    background:-moz-linear-gradient(top,#599bdc,#3072b3);
}
 
#login-close {
    background: url("http://pilu.github.com/web-app-theme/images/icons/cross.png") no-repeat top left;
    width: 16px;
    height: 16px;
    display: block;
    float: right;
    cursor: pointer;
}
#logo h1{
    line-height:90px;

    
    color:#495961;
    font-size:30px;
    font-weight:normal;
    letter-spacing:-1px;
    text-shadow:1px 1px 0 #FFFFFF;
}
table.attributes {
    width: 100%;
}
.attributes tr td{
    border-bottom: 1px solid #ddd;
}
.attributes tr.last td{
    border:0;
}
.attributes tr td{
    background-color: #ededed;
}
/*
.attributes tr.storedLocally td{
    background-color: #D2E1FF;
}
.attributes tr.even.storedLocally td{
    background-color: #E4EDFF;
}
*/
.attributes tr.even td{
    background-color: #f6f6f6;
}
.attributes td.key {
    font-weight: bold;
    text-align: right;
    padding: 20px 10px 20px 20px;
    width: 30%;
}
.attributes td.value {
    padding: 20px 10px 20px 0px;
    width: 70%;
}
.attributes td.error {
    padding:20px;
    text-align: center;
}
.add_attribute {
    border-top:1px solid #D9D9D9;
    color:#4183C4;
    cursor:pointer;
    display:block;
    font-size:12px;
    font-weight:bold;
    height:30px;
    line-height:32px;
    padding:0 10px 0 32px;

    -webkit-border-bottom-right-radius: 5px;
    -webkit-border-bottom-left-radius: 5px;
    -moz-border-radius-bottomright: 5px;
    -moz-border-radius-bottomleft: 5px;
    border-bottom-right-radius: 5px;
    border-bottom-left-radius: 5px;
}
.add_attribute:hover {
    background-color:#4183C4;
    border-top: 1px solid #175790;
    color:#FFFFFF;
}
.attributes tr.inline-edit td {
    vertical-align: top;
}
.attributes input  {
    width: 100px !important;
}
.attributes textarea {
    width: 290px !important;
}
.attributes a img {
    max-width: 300px;
    border: 0;
}

.toolbar {
    cursor: pointer;
    background: #eee;
}
.toolbar div:hover {
    background-color:#4183C4;
}
.toolbar_edit {
    width: 30px;
    height: 30px;
    background: url(/images/edit_icon.png) no-repeat center center;
}
.toolbar_remove {
    width: 30px;
    height: 30px;
    background: url(/images/remove_icon.png) no-repeat center center;

}
</style> 
</head> 
 
<body class="explore"> 
    <div id="main" class=""> 
        <div id="header" style="height: 100px;"> 
 
            
            <div id="logo"> 
                <h1>Crop Ontology - Curation tool demo</h1>
            </div> 
        </div> 
        <div class="site"> 
<div class="pagehead"> 
    <h2 style="margin:5px; border-bottom:0 !important; padding:0;"> 
 
          <a class="feed" href="http://test.development.grinfo.net/Luca/datadict/comments">Subscribe to all comments</a> 
    </h2> 
  <h1>Curation Tool</h1> 
</div> 
 
            <div class="left browser-content"> 
                <div class="cont"> 
                    <!--<div class="filterbox">
                          <input type="search" placeholder="Find a term">
                    </div>--> 
 
                    <ul class="treeview" id="root"> 
 
                    </ul> 
                </div> 
            </div><!-- end left --> 
<div class="right"> 
 
<div class="browser-content browser" style="margin:0;"> 
  <div class="filterbar"> 
    <ul class="filters"> 
        <span id="term_id" style="display: none;"></span>
      <li data-filter="read" ><a href="#">Name</a></li> 
    </ul> 
 
    <ul class="sorts"> 
      <li data-sort="created" class="desc" id="general">General</li> 
      <li data-sort="popularity" id="new-comments">Comments</li> 
    </ul> 
  </div> 
  <div style="display: none;" class="context-loader">Sending Request...</div> 
  <div class="none" style="display: none; opacity: 1;"> 
    <p>No pull requests to show</p> 
  </div> 
  <div style="display: none;" class="error"> 
    <p>There was an error with the request</p> 
  </div> 
<div id="pages"> 
 
    <div class="new-comments" style="margin: 0px 10px; display: none;"> 
 
    <div class="comment-list"> 
        <div class="comment normal-comment" id="issuecomment-711523"> 
          <div class="cmeta"> 
            <p class="author" style="width: 250px;"> 
              <span class="gravatar"><img width="20" height="20" alt="" src="https://secure.gravatar.com/avatar/ffe68d6f71b225f7661d33f2a8908281?s=140&amp;d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-140.png"></span> 
              <strong class="author"><a href="/paulirish">paulirish</a></strong> 
              <em class="action-text"> 
                <a href="#issuecomment-711523"> 
                commented
                </a> 
              </em> 
              
            </p> 
            <p class="info"> 
              <em class="date"><abbr title="2011-01-26 15:47:04" class="relatize relatized">about 8 hours ago</abbr></em> 
              <span class="icon"></span> 
            </p> 
          </div> 
 
          
 
          <div class="body"> 
            
            <div class="formatted-content"> 
              
              
              <div class="content-body wikistyle"> 
                <p>Does this patch change <code>foo/stuff.html</code> to <code>foo/stuff.html/</code> ?</p> 
              </div> 
            </div> 
            
          </div> 
        </div><!-- /comment --> 
    </div><!-- /comment-list --> 
 
 
    <h3>Comment</h3> 
    <div class="comment-form previewable-comment-form"> 
        
        <textarea id="comment_body_430" tabindex="1" name="comment[body]"></textarea> 
 
    </div><!-- /comment-form --> 
    <div class="form-actions"> 
        <button tabindex="2" class="classy" type="submit"><span>Comment</span></button> 
    </div> 
    <br> 
 
 
    </div><!-- end new-comments --> 
 
    <div class="general description" > 
 
        </div><!-- end general --> 
</div><!-- /pages --> 
</div><!-- /browser-content --> 
</div><!-- end right --> 
 
 
 
        </div> 
    <div style="clear:both;"></div> 
    </div><!-- /main --> 
 
 
<div id="mylogin" style="position: absolute; top:50%; left: 50%; margin-top: -200px; margin-left: -200px; display: none;"> 
 
    <div class="login_form" id="login" style=""> 
      <form method="post" id="login_form" action="/session"><div style="margin: 0pt; padding: 0pt;"><input type="hidden" value="5cdd9e664d321b89797b0ed43576d21152bc53e9" name="authenticity_token"></div>      <h1>Log in<a id="login-close"></a></h1> 
      <div class="formbody"> 
        
            <div class="context-loader" style="display: none; top:107px;">Sending Request...</div> 
        <div class="error_box" style="display: none;">Incorrect login or password.</div> 
        
        <label for="login"> 
            Login or Email<br> 
            <input type="text" value="" tabindex="1" style="width: 21em;" name="username" id="login_field" class="text"> 
        </label> 
 
        <label for="password"> 
            Password 
            <br> 
            <input type="password" value="" tabindex="2" style="width: 21em;" name="password" id="password" class="text"> 
        </label> 
 
        <label class="submit_btn"> 
                                    <input type="submit" value="Log in" tabindex="3" name="commit"> 
        </label> 
      </div> 
    </form>  </div> 
 
</div><!-- /mylogin --> 
 
<div class="toolbar" style="display: none; position: absolute; top:0; left:0;">
    <div class="toolbar_edit"></div>
    <div class="toolbar_remove"></div>
</div>
<iframe name="upload_iframe" src="/add-attribute" style="display: none;"></iframe>

 
<!--[if IE 8]>
<script type="text/javascript" charset="utf-8">
  $(document.body).addClass("ie8")
</script>
<![endif]--> 
 
<!--[if IE 7]>
<script type="text/javascript" charset="utf-8">
  $(document.body).addClass("ie7")
</script>
<![endif]--> 
 
</body> 
</html> 
